<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Car Brand Spotting Counter</title>

<!-- App Icons & Manifest -->
<link rel="icon" href="logos/app_icon.png">
<link rel="apple-touch-icon" href="logos/app_icon.png">
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
body {
  display: flex;
  flex-direction: row;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}
.container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  padding: 10px;
  flex: 1;
}
.brand-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 10px;
  border-radius: 50%;
  background-color: #f0f0f0;
  border: 1px solid #ccc;
  font-weight: bold;
  text-transform: uppercase;
}
.brand-btn img {
  max-width: 50px;
  max-height: 50px;
  margin-bottom: 5px;
}
.sidebar {
  width: 250px;
  padding: 10px;
  border-left: 2px solid #ddd;
}
.sidebar h2 {
  margin-top: 0;
}
table {
  width: 100%;
  border-collapse: collapse;
}
table td {
  padding: 5px;
  border-bottom: 1px solid #ccc;
}
table td img {
  width: 20px;
  height: auto;
  vertical-align: middle;
  margin-right: 5px;
}
button.action-btn {
  margin: 5px 0;
  padding: 8px;
  width: 100%;
}

/* Mobile Portrait Mode */
@media (max-width: 600px) {
  body {
    flex-direction: column;
  }
  .container {
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
  }
  .brand-btn {
    width: 90px;
    height: 90px;
  }
  .brand-btn img {
    max-width: 40px;
    max-height: 40px;
  }
  .sidebar {
    width: 100%;
    border-left: none;
    border-top: 2px solid #ddd;
  }
}
</style>
</head>
<body>

<div class="container" id="brandContainer"></div>

<div class="sidebar">
  <h2>Leaderboard</h2>
  <table id="leaderboard"></table>
  <button class="action-btn" onclick="resetAll()">Reset All</button>
  <button class="action-btn" onclick="undoReset()">Undo Reset</button>
  <button class="action-btn" onclick="undoBrand()">Undo Brand Click</button>
</div>

<script>
const brands = [
  "bmw.png","ford.png","honda.png","mazda.png","porsche.png","tesla.png","toyota.png",
  "audi.jpg","ds.jpg","fiat.jpg","hyundai.jpg","kia.jpg","mercedes-benz.jpg","mg.jpg",
  "mini.jpg","mitsubishi.jpg","opel.jpg","peugeot.jpg","renault.jpg","seat.jpg",
  "skoda.jpg","volkswagen.jpg","volvo.jpg"
];

let counts = {};
let lastBrand = null;
let resetBackup = null;

// Initialize buttons
const container = document.getElementById('brandContainer');
brands.forEach(file => {
  const brandName = file.split('.')[0].toUpperCase();
  counts[brandName] = 0;

  const btn = document.createElement('button');
  btn.className = 'brand-btn';
  btn.onclick = () => {
    counts[brandName]++;
    lastBrand = brandName;
    updateLeaderboard();
  };

  const img = document.createElement('img');
  img.src = 'logos/' + file;
  img.alt = brandName;

  btn.appendChild(img);
  btn.appendChild(document.createTextNode(brandName));
  container.appendChild(btn);
});

function updateLeaderboard() {
  const leaderboard = document.getElementById('leaderboard');
  leaderboard.innerHTML = '';
  Object.entries(counts)
    .sort((a,b) => b[1] - a[1])
    .forEach(([brand, count]) => {
      const row = document.createElement('tr');
      const brandCell = document.createElement('td');
      const img = document.createElement('img');
      img.src = 'logos/' + brands.find(f => f.split('.')[0].toUpperCase() === brand);
      brandCell.appendChild(img);
      brandCell.appendChild(document.createTextNode(brand));
      const countCell = document.createElement('td');
      countCell.textContent = count;
      row.appendChild(brandCell);
      row.appendChild(countCell);
      leaderboard.appendChild(row);
    });
}

function resetAll() {
  resetBackup = {...counts};
  Object.keys(counts).forEach(b => counts[b] = 0);
  updateLeaderboard();
}

function undoReset() {
  if (resetBackup) {
    counts = {...resetBackup};
    resetBackup = null;
    updateLeaderboard();
  }
}

function undoBrand() {
  if (lastBrand && counts[lastBrand] > 0) {
    counts[lastBrand]--;
    lastBrand = null;
    updateLeaderboard();
  }
}

updateLeaderboard();
</script>

</body>
</html>
